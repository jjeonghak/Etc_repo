//임베디드 모드 데이터베이스
  H2 데이터베이스는 자바로 개발되어서 JVM 내부에 메모리 모드로 동작하는 기능 제공
  어플리케이션 실행과 함께 H2 데이터베이스도 JVM 메모리에 포함해서 실행 가능
  임베디드 모드로 동작하는 H2 데이터베이스는 어플리케이션과 함께 실행 및 종료
  
    @Bean
    @Profile("test")
    public DataSource dataSource() {
        DriverManagerDataSource dataSource = new DriverManagerDataSource();
        dataSource.setDriverClassName("org.h2.Driver");
        dataSource.setUrl("jdbc:h2:mem:db;DB_CLOSE_DELAY=-1");
        dataSource.setUsername("sa");
        dataSource.setPassword("");
        return dataSource;
    }

  jdbc:h2:mem:db; //데이터소스를 만들때 임베디드 모드로 사용
  DB_CLOSE_DELAY=-1 //임베디드 모드에서 커넥션 종료시 데이터베이스 종료되는 현상방지


//메모리 데이터베이스 초기화
  메모리 데이터베이스는 어플리케이션이 종료될 때 제거되므로 테이블도 새롭게 생성필요
  스프링 부트는 sql 스크립트를 실행해서 어플리케이션 시작 시점에 데이터베이스 초기화 기능 제공

    [test/resources/schema.sql]
    drop table if exists item CASCADE;
    create table item
    (
        item_id     bigint generated by default as identity,
        item_name   varchar(10),
        price       integer,
        quantity    integer,
        primary key (item_id)
    );


//스프링 부트 임베디드 모드
  스프링 부트는 데이터베이스에 대한 별다른 설정이 없는 경우 임베디드 모드 사용
  dataSource 관련 설정과 빈을 모두 제거 후 실행시 자동 임베디드 모드(/test/..)
  여러 데이터소스가 사용될 경우 같은 데이터베이스를 사용해서 발생하는 충돌 방지를 위해 임의의 이름 부여
      
    conn0: url=jdbc:h2:mem:d8fb3a29-caf7-4b37-9b6c-b0eed998545
  
    [test/resources/properties]
    spring.datasource.generate-unique-name=false //임의의 이름 부여 해제



